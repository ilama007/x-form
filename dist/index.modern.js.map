{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  FormGroup,\n  InputGroup,\n  TextArea,\n  RadioGroup,\n  Radio,\n  Checkbox,\n  HTMLSelect,\n  Button\n} from '@blueprintjs/core';\nimport './blueprint-light.css';\n\nconst styles = {\n  errorMsg: {\n    color: 'red',\n    fontSize: 12\n  }\n};\n\nexport default function XForm({\n  name,\n  okButtonTitle,\n  showResetButton,\n  schema,\n  initialValues,\n  validationHandler,\n  successHandler,\n  disableButtons\n}) {\n  const [values, setValues] = useState(initialValues);\n  const [errors, setErrors] = useState({});\n  const [submitComplete, setSubmitComplete] = useState(false);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    setSubmitComplete(false);\n    validationHandler && setErrors(validationHandler(values));\n    setSubmitComplete(true);\n  };\n\n  const resetHandler = () => {\n    setValues({ ...initialValues });\n  };\n\n  useEffect(() => {\n    if (submitComplete) {\n      if (Object.keys(errors).length === 0 && errors.constructor === Object) {\n        successHandler(values);\n      }\n    }\n  }, [errors, submitComplete]);\n\n  const handleChange = (event) => {\n    event.persist();\n    const elementType = event.target.type;\n    if (elementType === 'checkbox') {\n      setValues((values) => ({\n        ...values,\n        [event.target.name]: event.target.checked\n      }));\n    } else {\n      setValues((values) => ({\n        ...values,\n        [event.target.name]: event.target.value\n      }));\n    }\n  };\n\n  return (\n    <form id={name} noValidate>\n      {schema.map((obj) => {\n        if (\n          obj.type === 'email' ||\n          obj.type === 'text' ||\n          obj.type === 'password' ||\n          obj.type === 'tel'\n        ) {\n          return (\n            <FormGroup\n              key={obj.name}\n              label={<span dangerouslySetInnerHTML={{ __html: obj.label }} />}\n              labelFor={`${name}__${obj.name}`}\n              labelInfo={obj.labelInfo || ''}\n            >\n              <InputGroup\n                large\n                id={`${name}__${obj.name}`}\n                name={obj.name}\n                placeholder={obj.placeHolder || ''}\n                maxLength={obj.maxLength && obj.maxLength}\n                minLength={obj.minLength && obj.minLength}\n                type={obj.type}\n                onChange={handleChange}\n                value={values[obj.name]}\n              />\n              {errors[obj.name] && (\n                <p style={styles.errorMsg}>{errors[obj.name]}</p>\n              )}\n            </FormGroup>\n          );\n        }\n\n        if (obj.type === 'textarea') {\n          return (\n            <FormGroup\n              key={obj.name}\n              label={<span dangerouslySetInnerHTML={{ __html: obj.label }} />}\n              labelFor={`${name}__${obj.name}`}\n              labelInfo={obj.labelInfo || ''}\n            >\n              <TextArea\n                id={`${name}__${obj.name}`}\n                name={obj.name}\n                text={values[obj.name]}\n                placeholder={obj.placeHolder || ''}\n                rows={obj.rows && obj.rows}\n                cols={obj.cols && obj.cols}\n                growVertically\n                large\n                onChange={handleChange}\n              />\n              {errors[obj.name] && (\n                <p style={styles.errorMsg}>{errors[obj.name]}</p>\n              )}\n            </FormGroup>\n          );\n        }\n\n        if (obj.type === 'radiogroup') {\n          return (\n            <FormGroup\n              key={obj.name}\n              label={<span dangerouslySetInnerHTML={{ __html: obj.label }} />}\n              labelInfo={obj.labelInfo || ''}\n            >\n              <RadioGroup\n                onChange={handleChange}\n                name={obj.name}\n                selectedValue={values[obj.name]}\n              >\n                {obj.options.map((option, index) => {\n                  return (\n                    <Radio\n                      large\n                      key={index}\n                      className={`${name}__radio-${obj.name}`}\n                      value={option.value}\n                    >\n                      <span\n                        dangerouslySetInnerHTML={{ __html: option.label }}\n                      />\n                    </Radio>\n                  );\n                })}\n              </RadioGroup>\n              {errors[obj.name] && (\n                <p style={styles.errorMsg}>{errors[obj.name]}</p>\n              )}\n            </FormGroup>\n          );\n        }\n\n        if (obj.type === 'checkboxgroup') {\n          return (\n            <FormGroup\n              key={obj.name}\n              label={<span dangerouslySetInnerHTML={{ __html: obj.label }} />}\n              labelInfo={obj.labelInfo || ''}\n            >\n              {obj.options.map((option, index) => {\n                return (\n                  <Checkbox\n                    key={index}\n                    name={option.name}\n                    large\n                    checked={values[option.name]}\n                    onChange={handleChange}\n                  >\n                    <span dangerouslySetInnerHTML={{ __html: option.label }} />\n                  </Checkbox>\n                );\n              })}\n              {errors[obj.name] && (\n                <p style={styles.errorMsg}>{errors[obj.name]}</p>\n              )}\n            </FormGroup>\n          );\n        }\n\n        if (obj.type === 'selectlist') {\n          return (\n            <FormGroup\n              key={obj.name}\n              label={<span dangerouslySetInnerHTML={{ __html: obj.label }} />}\n              labelInfo={obj.labelInfo || ''}\n            >\n              <HTMLSelect\n                name={obj.name}\n                options={obj.options}\n                large\n                value={values[obj.name]}\n                onChange={handleChange}\n              />\n              {errors[obj.name] && (\n                <p style={styles.errorMsg}>{errors[obj.name]}</p>\n              )}\n            </FormGroup>\n          );\n        }\n      })}\n      <FormGroup>\n        {' '}\n        <Button\n          className='btn-submit'\n          onClick={handleSubmit}\n          disabled={disableButtons}\n        >\n          <span dangerouslySetInnerHTML={{ __html: okButtonTitle || 'SEND' }} />\n        </Button>\n        {showResetButton && (\n          <Button\n            className='btn-reset'\n            disabled={disableButtons}\n            onClick={resetHandler}\n          >\n            RESET\n          </Button>\n        )}\n      </FormGroup>\n    </form>\n  );\n}\n\nXForm.propTypes = {\n  /**\n   * Name and id of the form. Optional but recommended for style namespacing purposes when\n   * more than one form is rendered in a single page.\n   * */\n  name: PropTypes.string,\n  /**\n   * Schema of the form. Refer the example how it is defined\n   */\n  schema: PropTypes.array.isRequired,\n  /**\n   * Initial value passed to the schema. The keys will be based upon the name of the field in the\n   * schema. Refer to the example.\n   */\n  initialValues: PropTypes.object.isRequired,\n  /**\n   * Function that will compose appropriate error messages for the form.\n   */\n  validationHandler: PropTypes.func.isRequired,\n  /**\n   * Function that will execute when all data are validated. This will return a valid JSON data which\n   * can be fed to API post/get request using appropriate http methods.\n   */\n  successHandler: PropTypes.func.isRequired,\n  /**\n   * Boolean flag that will enable/disable buttons. This can be used to turn on and off while data request is\n   * being processed.\n   */\n  disableButtons: PropTypes.bool,\n  /**\n   * This sets the title of the SUBMIT button. It can be used to change text when data is being processed.\n   */\n  okButtonTitle: PropTypes.string,\n  /**\n   * This boolean flag will hide/show RESET button\n   */\n  showResetButton: PropTypes.bool\n};\n"],"names":["styles","errorMsg","color","fontSize","XForm","name","okButtonTitle","showResetButton","schema","initialValues","validationHandler","successHandler","disableButtons","values","setValues","useState","errors","setErrors","submitComplete","setSubmitComplete","handleSubmit","event","preventDefault","resetHandler","useEffect","Object","keys","length","constructor","handleChange","persist","elementType","target","type","checked","value","map","obj","__html","label","labelInfo","placeHolder","maxLength","minLength","rows","cols","options","option","index","propTypes","PropTypes","string","array","isRequired","object","func","bool"],"mappings":"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"}