{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  FormGroup,\n  InputGroup,\n  TextArea,\n  RadioGroup,\n  Radio,\n  Checkbox,\n  HTMLSelect,\n  Button\n} from '@blueprintjs/core';\nimport './blueprint-light.css';\n\nconst styles = {\n  errorMsg: {\n    color: 'red',\n    fontSize: 12\n  }\n};\n\nexport default function XForm({\n  name,\n  okButtonTitle,\n  showResetButton,\n  schema,\n  initialValues,\n  validationHandler,\n  successHandler,\n  disableButtons\n}) {\n  const [values, setValues] = useState(initialValues);\n  const [errors, setErrors] = useState({});\n  const [submitComplete, setSubmitComplete] = useState(false);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    setSubmitComplete(false);\n    validationHandler && setErrors(validationHandler(values));\n    setSubmitComplete(true);\n  };\n\n  const resetHandler = () => {\n    setValues({ ...initialValues });\n  };\n\n  useEffect(() => {\n    if (submitComplete) {\n      if (Object.keys(errors).length === 0 && errors.constructor === Object) {\n        successHandler(values);\n      }\n    }\n  }, [errors, submitComplete]);\n\n  const handleChange = (event) => {\n    event.persist();\n    const elementType = event.target.type;\n    if (elementType === 'checkbox') {\n      setValues((values) => ({\n        ...values,\n        [event.target.name]: event.target.checked\n      }));\n    } else {\n      setValues((values) => ({\n        ...values,\n        [event.target.name]: event.target.value\n      }));\n    }\n  };\n\n  return (\n    <form id={name} noValidate>\n      {schema.map((obj) => {\n        if (\n          obj.type === 'email' ||\n          obj.type === 'text' ||\n          obj.type === 'password' ||\n          obj.type === 'tel'\n        ) {\n          return (\n            <FormGroup\n              key={obj.name}\n              label={obj.label}\n              labelFor={`${name}__${obj.name}`}\n              labelInfo={obj.labelInfo || ''}\n            >\n              <InputGroup\n                large\n                id={`${name}__${obj.name}`}\n                name={obj.name}\n                placeholder={obj.placeHolder || ''}\n                maxLength={obj.maxLength && obj.maxLength}\n                minLength={obj.minLength && obj.minLength}\n                type={obj.type}\n                onChange={handleChange}\n                value={values[obj.name]}\n              />\n              {errors[obj.name] && (\n                <p style={styles.errorMsg}>{errors[obj.name]}</p>\n              )}\n            </FormGroup>\n          );\n        }\n\n        if (obj.type === 'textarea') {\n          return (\n            <FormGroup\n              key={obj.name}\n              label={obj.label}\n              labelFor={`${name}__${obj.name}`}\n              labelInfo={obj.labelInfo || ''}\n            >\n              <TextArea\n                id={`${name}__${obj.name}`}\n                name={obj.name}\n                text={values[obj.name]}\n                placeholder={obj.placeHolder || ''}\n                rows={obj.rows && obj.rows}\n                cols={obj.cols && obj.cols}\n                growVertically\n                large\n                onChange={handleChange}\n              />\n              {errors[obj.name] && (\n                <p style={styles.errorMsg}>{errors[obj.name]}</p>\n              )}\n            </FormGroup>\n          );\n        }\n\n        if (obj.type === 'radiogroup') {\n          return (\n            <FormGroup\n              key={obj.name}\n              label={obj.label}\n              labelInfo={obj.labelInfo || ''}\n            >\n              <RadioGroup\n                onChange={handleChange}\n                name={obj.name}\n                selectedValue={values[obj.name]}\n              >\n                {obj.options.map((option, index) => {\n                  return (\n                    <Radio\n                      large\n                      key={index}\n                      label={option.label}\n                      className={`${name}__radio-${obj.name}`}\n                      value={option.value}\n                    />\n                  );\n                })}\n              </RadioGroup>\n              {errors[obj.name] && (\n                <p style={styles.errorMsg}>{errors[obj.name]}</p>\n              )}\n            </FormGroup>\n          );\n        }\n\n        if (obj.type === 'checkboxgroup') {\n          return (\n            <FormGroup\n              key={obj.name}\n              label={obj.label}\n              labelInfo={obj.labelInfo || ''}\n            >\n              {obj.options.map((option, index) => {\n                return (\n                  <Checkbox\n                    key={index}\n                    name={option.name}\n                    large\n                    checked={values[option.name]}\n                    onChange={handleChange}\n                  >\n                    {option.label}\n                  </Checkbox>\n                );\n              })}\n              {errors[obj.name] && (\n                <p style={styles.errorMsg}>{errors[obj.name]}</p>\n              )}\n            </FormGroup>\n          );\n        }\n\n        if (obj.type === 'selectlist') {\n          return (\n            <FormGroup\n              key={obj.name}\n              label={obj.label}\n              labelInfo={obj.labelInfo || ''}\n            >\n              <HTMLSelect\n                name={obj.name}\n                options={obj.options}\n                large\n                value={values[obj.name]}\n                onChange={handleChange}\n              />\n              {errors[obj.name] && (\n                <p style={styles.errorMsg}>{errors[obj.name]}</p>\n              )}\n            </FormGroup>\n          );\n        }\n      })}\n      <FormGroup>\n        {' '}\n        <Button\n          className='btn-submit'\n          onClick={handleSubmit}\n          disabled={disableButtons}\n        >\n          {okButtonTitle || 'SEND'}\n        </Button>\n        {showResetButton && (\n          <Button\n            className='btn-reset'\n            disabled={disableButtons}\n            onClick={resetHandler}\n          >\n            RESET\n          </Button>\n        )}\n      </FormGroup>\n    </form>\n  );\n}\n\nXForm.propTypes = {\n  /**\n   * Name and id of the form. Optional but recommended for style namespacing purposes when\n   * more than one form is rendered in a single page.\n   * */\n  name: PropTypes.string,\n  /**\n   * Schema of the form. Refer the example how it is defined\n   */\n  schema: PropTypes.array.isRequired,\n  /**\n   * Initial value passed to the schema. The keys will be based upon the name of the field in the\n   * schema. Refer to the example.\n   */\n  initialValues: PropTypes.object.isRequired,\n  /**\n   * Function that will compose appropriate error messages for the form.\n   */\n  validationHandler: PropTypes.func.isRequired,\n  /**\n   * Function that will execute when all data are validated. This will return a valid JSON data which\n   * can be fed to API post/get request using appropriate http methods.\n   */\n  successHandler: PropTypes.func.isRequired,\n  /**\n   * Boolean flag that will enable/disable buttons. This can be used to turn on and off while data request is\n   * being processed.\n   */\n  disableButtons: PropTypes.bool,\n  /**\n   * This sets the title of the SUBMIT button. It can be used to change text when data is being processed.\n   */\n  okButtonTitle: PropTypes.string,\n  /**\n   * This boolean flag will hide/show RESET button\n   */\n  showResetButton: PropTypes.bool\n};\n"],"names":["styles","errorMsg","color","fontSize","XForm","name","okButtonTitle","showResetButton","schema","initialValues","validationHandler","successHandler","disableButtons","useState","values","setValues","errors","setErrors","submitComplete","setSubmitComplete","handleSubmit","event","preventDefault","resetHandler","useEffect","Object","keys","length","constructor","handleChange","persist","elementType","target","type","checked","value","React","map","obj","FormGroup","label","labelInfo","InputGroup","placeHolder","maxLength","minLength","TextArea","rows","cols","RadioGroup","options","option","index","Radio","Checkbox","HTMLSelect","Button","propTypes","PropTypes","string","array","isRequired","object","func","bool"],"mappings":"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"}